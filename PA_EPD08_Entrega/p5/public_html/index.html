<!DOCTYPE html>
<!--
Grupo 07

-->
<html>
    <head>
        <title>EPD08-P5-Grupo7</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <script language="JavaScript">

        function processData()
        {
            var categorias = document.getElementsByTagName("textarea")[0].value.split(",");
            var table = document.getElementsByTagName("table")[0];
            addFila(table,imagesURL(categorias));
        }
        
        function addFila(table,imagesURL)
        {
            //Asi lo agregamos una nueva fila y unas nuevas celdas al final de la tabla
            var row = table.insertRow(-1);
            
            var cells = [];
            
            //Agregamos tantas celdas como nos hagan falta
            
            for(var i=0;i<imagesURL.length;i++)
            {
                cells[i] = row.insertCell(-1);
            }
            
            //Agregamos a cada celda un enlace a la imagen generada
            
            for(var i=0;i<cells.length;i++)
            {
                var aux = document.createElement("img");
                aux.setAttribute("src", imagesURL[i]);
                aux.setAttribute("width","300px");
                cells[i].appendChild(aux);
            }
 
        }
        
        function imagesURL(tags)
        {
            var defaultURL="https://source.unsplash.com/featured/?";
            
            var defaultTags=['man','woman'];
            
            var result = [];
            
            //Primero rellenemos al array resultdo con la URL por defecto
            
            for(var i=0;i<defaultTags.length;i++)
            {
                result[i] = defaultURL + defaultTags[i];
            }
            
            //Para cada resultado, le agregamos los tags del usuario y le ponemos 
            //la marca temporal necesaria
            
            for(var i=0;i<result.length;i++)
            {
                
                for(var j=0;j<tags.length;j++)
                {
                    result[i]+=","+tags[j]; 
                }
                
                result[i]+="&"+Date.now();
                
            }

            return result;
        }
        



        </script>

    </head>
    <body>
        <table border=1>
            <tr>
                <th>man</th>
                <th>woman</th>
            </tr>
        </table>
        
        <h3>Por favor indique las categorias deseadas</h3>
        
        <br>
            
            <textarea name="categorias" cols="20" rows="5"></textarea>
            <br>
            <br>
            <input type="submit" name="enviar" value="Nueva Fila" onclick="processData()">
        
    </body>
</html>
